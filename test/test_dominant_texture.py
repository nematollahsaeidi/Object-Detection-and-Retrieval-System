
def test_image():
    from vision.filters.texture.dominant_texture import lbp_histogram_rgb

    DIRECTORY = './test/test_images/'
    dominant_texture_image = lbp_histogram_rgb('category-men-sport-t-shirts-polos_116981190.jpg', DIRECTORY)
    assert len(dominant_texture_image) == 256
    dominant_texture_image_second = [4.93066667e-03, 5.10609524e-03, 2.07619048e-04, 1.01447619e-03, 5.97866667e-03,
                                     8.02095238e-04, 1.19866667e-03, 2.25087619e-02, 1.89142857e-04, 7.02857143e-05,
                                     1.71428571e-05, 1.69523810e-05, 1.20342857e-03, 9.77142857e-05, 1.68857143e-03,
                                     8.89409524e-03,
                                     5.04190476e-03, 3.49542857e-03, 7.33333333e-05, 2.19809524e-04,
                                     7.95238095e-04, 5.54476190e-04, 1.10666667e-04, 1.12685714e-03,
                                     9.52190476e-04, 2.19809524e-04, 1.84761905e-05, 4.72380952e-05,
                                     2.19470476e-02, 1.11352381e-03, 8.83523810e-03, 4.29784762e-02,
                                     2.00380952e-04, 7.71428571e-05, 9.71428571e-06, 1.48571429e-05,
                                     9.67619048e-05, 1.48571429e-05, 1.56190476e-05, 1.48952381e-04,
                                     7.61904762e-06, 2.28571429e-06, 5.71428571e-07, 1.90476190e-07,
                                     3.04761905e-05, 2.09523810e-06, 2.45714286e-05, 6.40000000e-05,
                                     9.75809524e-04, 2.18666667e-04, 1.56190476e-05, 2.38095238e-05,
                                     1.30285714e-04, 2.38095238e-05, 3.08571429e-05, 1.16380952e-04,
                                     2.54247619e-03, 1.94285714e-04, 2.13333333e-05, 4.49523810e-05,
                                     1.89792381e-02, 3.01142857e-04, 3.00495238e-03, 5.53257143e-03,
                                     5.93942857e-03, 7.08952381e-04, 1.00000000e-04, 1.27238095e-04,
                                     5.44019048e-03, 9.32000000e-04, 4.45904762e-04, 1.26095238e-03,
                                     8.60952381e-05, 1.21904762e-05, 7.61904762e-06, 2.28571429e-06,
                                     4.38857143e-04, 2.47619048e-05, 2.84380952e-04, 3.18857143e-04,
                                     7.51428571e-04, 4.86857143e-04, 1.77142857e-05, 1.75238095e-05,
                                     1.02533333e-03, 6.44076190e-03, 2.41904762e-05, 1.97523810e-04,
                                     1.02857143e-04, 1.94285714e-05, 3.42857143e-06, 2.09523810e-06,
                                     1.28323810e-03, 2.04190476e-04, 3.36000000e-04, 1.41619048e-03,
                                     1.23257143e-03, 9.08571429e-05, 1.52380952e-05, 2.80000000e-05,
                                     4.64000000e-04, 2.13333333e-05, 3.27619048e-05, 1.12000000e-04,
                                     2.93333333e-05, 7.61904762e-07, 1.14285714e-06, 1.90476190e-07,
                                     9.94285714e-05, 4.00000000e-06, 4.11428571e-05, 3.75238095e-05,
                                     2.13080000e-02, 1.11561905e-03, 1.44380952e-04, 1.27809524e-04,
                                     1.22819048e-03, 1.72952381e-04, 1.21523810e-04, 3.35047619e-04,
                                     1.46087619e-02, 2.99809524e-04, 6.09523810e-05, 4.19047619e-05,
                                     6.26085714e-02, 1.96533333e-03, 5.93714286e-03, 1.45575238e-02,
                                     2.05333333e-04, 9.65142857e-04, 1.23809524e-05, 2.65428571e-03,
                                     8.47619048e-05, 1.09523810e-04, 2.95238095e-05, 1.52628571e-02,
                                     8.19047619e-06, 1.71428571e-05, 7.61904762e-07, 2.41904762e-05,
                                     1.58095238e-05, 3.02857143e-05, 2.19047619e-05, 2.98266667e-03,
                                     6.43809524e-05, 2.23809524e-04, 1.90476190e-06, 1.90857143e-04,
                                     1.29523810e-05, 2.20952381e-05, 3.04761905e-06, 3.05714286e-04,
                                     1.71428571e-05, 2.41904762e-05, 7.61904762e-07, 4.00000000e-05,
                                     1.29142857e-04, 1.25904762e-04, 6.01904762e-05, 5.57295238e-03,
                                     1.63809524e-05, 2.05714286e-05, 1.90476190e-07, 2.07619048e-05,
                                     9.90476190e-06, 2.28571429e-06, 1.33333333e-06, 6.81904762e-05,
                                     3.80952381e-07, 1.14285714e-06, 1.90476190e-07, 1.14285714e-06,
                                     1.90476190e-07, 7.61904762e-07, 3.23809524e-06, 6.07619048e-05,
                                     2.09523810e-05, 5.23809524e-05, 1.90476190e-06, 4.36190476e-05,
                                     1.90476190e-06, 2.85714286e-06, 3.80952381e-07, 4.30476190e-05,
                                     2.53333333e-05, 4.22857143e-05, 9.52380952e-07, 1.46857143e-04,
                                     7.92380952e-05, 5.31428571e-05, 6.51428571e-05, 1.72571429e-03,
                                     1.23466667e-03, 2.15438095e-02, 3.48571429e-05, 1.89502857e-02,
                                     4.41523810e-04, 1.19885714e-03, 8.55238095e-05, 6.64980952e-02,
                                     1.37142857e-05, 1.32761905e-04, 5.71428571e-07, 8.19047619e-05,
                                     3.21904762e-05, 1.16190476e-04, 4.15238095e-05, 6.22190476e-03,
                                     9.96190476e-05, 1.13123810e-03, 2.28571429e-06, 2.99619048e-04,
                                     2.62857143e-05, 1.44000000e-04, 2.28571429e-06, 1.88666667e-03,
                                     2.95238095e-05, 1.20190476e-04, 7.61904762e-07, 4.87619048e-05,
                                     1.15047619e-04, 3.52761905e-04, 4.55238095e-05, 1.51196190e-02,
                                     1.71200000e-03, 9.00019048e-03, 2.03809524e-05, 3.03104762e-03,
                                     2.97142857e-04, 3.23428571e-04, 4.38095238e-05, 6.01009524e-03,
                                     2.13333333e-05, 6.30476190e-05, 2.85714286e-06, 6.91428571e-05,
                                     4.85714286e-05, 4.22857143e-05, 9.29523810e-05, 1.32342857e-03,
                                     8.81809524e-03, 4.36664762e-02, 5.67619048e-05, 5.46190476e-03,
                                     3.31047619e-04, 1.34742857e-03, 3.67619048e-05, 1.41651429e-02,
                                     2.84552381e-03, 5.56609524e-03, 6.07619048e-05, 1.72933333e-03,
                                     5.96019048e-03, 1.40744762e-02, 1.30971429e-03, 3.75060381e-01]
    print(dominant_texture_image_second)
    print(dominant_texture_image)
    assert ['{0:.7f}'.format(i) for i in dominant_texture_image] == \
           ['{0:.7f}'.format(i) for i in dominant_texture_image_second]

    # another test
    dominant_texture_image = lbp_histogram_rgb('category-men-tracksuits-sets_105636158.jpg', DIRECTORY)
    assert len(dominant_texture_image) == 256
    dominant_texture_image_second = [5.72228571e-03, 4.65866667e-03, 1.24380952e-04, 1.53923810e-03,
                                     5.63885714e-03, 6.87809524e-04, 1.34019048e-03, 1.22575238e-02,
                                     1.16000000e-04, 7.63809524e-05, 8.38095238e-06, 1.21904762e-05,
                                     1.31371429e-03, 1.59047619e-04, 1.72247619e-03, 7.57104762e-03,
                                     4.51714286e-03, 6.20476190e-03, 8.34285714e-05, 3.58857143e-04,
                                     6.75809524e-04, 1.40133333e-03, 1.65142857e-04, 8.76952381e-04,
                                     1.32495238e-03, 3.44000000e-04, 1.27619048e-05, 6.68571429e-05,
                                     1.09662857e-02, 8.29714286e-04, 6.88628571e-03, 2.58455238e-02,
                                     1.15619048e-04, 8.41904762e-05, 8.38095238e-06, 4.34285714e-05,
                                     9.69523810e-05, 1.14285714e-05, 2.93333333e-05, 2.04380952e-04,
                                     4.38095238e-06, 1.90476190e-06, 1.90476190e-07, 5.71428571e-07,
                                     1.58095238e-05, 7.61904762e-07, 1.54285714e-05, 5.77142857e-05,
                                     1.35542857e-03, 3.37523810e-04, 4.47619048e-05, 5.12380952e-05,
                                     1.99619048e-04, 3.94285714e-05, 1.08380952e-04, 2.92000000e-04,
                                     1.69180952e-03, 2.63428571e-04, 2.36190476e-05, 6.66666667e-05,
                                     8.97409524e-03, 2.61904762e-04, 3.24095238e-03, 5.36666667e-03,
                                     5.47447619e-03, 6.71047619e-04, 9.48571429e-05, 2.01904762e-04,
                                     4.58209524e-03, 1.42000000e-03, 3.22476190e-04, 7.43809524e-04,
                                     9.02857143e-05, 1.29523810e-05, 8.00000000e-06, 1.33333333e-06,
                                     3.12380952e-04, 4.28571429e-05, 1.96190476e-04, 1.61904762e-04,
                                     6.81142857e-04, 9.79619048e-04, 1.90476190e-05, 3.98095238e-05,
                                     1.40247619e-03, 4.53650286e-01, 4.57142857e-05, 1.70285714e-04,
                                     1.80571429e-04, 4.17142857e-05, 1.71428571e-06, 1.08571429e-05,
                                     7.38095238e-04, 1.60000000e-04, 1.68380952e-04, 1.41200000e-03,
                                     1.28609524e-03, 1.48952381e-04, 2.68571429e-05, 1.15238095e-04,
                                     3.03238095e-04, 3.98095238e-05, 4.68571429e-05, 2.41904762e-04,
                                     1.52380952e-05, 1.90476190e-06, 3.80952381e-07, 5.71428571e-07,
                                     6.41904762e-05, 4.95238095e-06, 5.60000000e-05, 6.22857143e-05,
                                     1.11611429e-02, 8.39238095e-04, 1.93333333e-04, 3.00571429e-04,
                                     7.14666667e-04, 1.61142857e-04, 2.40380952e-04, 5.38476190e-04,
                                     1.06579048e-02, 2.79619048e-04, 7.92380952e-05, 9.27619048e-05,
                                     2.14285714e-02, 1.17847619e-03, 4.48266667e-03, 4.26514286e-03,
                                     1.13142857e-04, 1.38628571e-03, 4.00000000e-06, 1.83771429e-03,
                                     1.02857143e-04, 2.06285714e-04, 1.75238095e-05, 1.09093333e-02,
                                     3.23809524e-06, 4.53333333e-05, 1.90476190e-07, 2.22857143e-05,
                                     3.04761905e-05, 1.07047619e-04, 2.57142857e-05, 3.80057143e-03,
                                     7.65714286e-05, 3.28380952e-04, 1.90476190e-06, 2.81714286e-04,
                                     1.44761905e-05, 4.19047619e-05, 9.52380952e-07, 2.93142857e-04,
                                     4.28571429e-05, 4.66666667e-05, 5.71428571e-07, 6.45714286e-05,
                                     2.07809524e-04, 3.14857143e-04, 6.15238095e-05, 5.70190476e-03,
                                     7.42857143e-06, 8.95238095e-06, 5.71428571e-07, 2.13333333e-05,
                                     8.57142857e-06, 1.90476190e-06, 3.80952381e-07, 8.66666667e-05,
                                     0.00000000e+00, 5.71428571e-07, 1.33333333e-06, 1.33333333e-06,
                                     9.52380952e-07, 7.61904762e-07, 7.04761905e-06, 3.67619048e-05,
                                     9.90476190e-06, 6.91428571e-05, 0.00000000e+00, 7.44761905e-05,
                                     2.47619048e-06, 3.61904762e-06, 9.52380952e-07, 1.01333333e-04,
                                     2.36190476e-05, 6.76190476e-05, 5.71428571e-07, 2.57714286e-04,
                                     9.31428571e-05, 9.54285714e-05, 4.20952381e-05, 3.44628571e-03,
                                     1.25790476e-03, 1.12257143e-02, 1.42857143e-05, 9.68057143e-03,
                                     3.18857143e-04, 7.25714286e-04, 7.06666667e-05, 2.30775238e-02,
                                     2.47619048e-05, 2.07809524e-04, 5.71428571e-07, 8.51428571e-05,
                                     4.76190476e-05, 2.41142857e-04, 6.97142857e-05, 4.94533333e-03,
                                     1.49714286e-04, 8.41333333e-04, 2.28571429e-06, 2.93714286e-04,
                                     4.64761905e-05, 1.61333333e-04, 5.52380952e-06, 1.19352381e-03,
                                     1.15047619e-04, 3.01904762e-04, 1.14285714e-06, 1.05333333e-04,
                                     2.52571429e-04, 5.22285714e-04, 7.23809524e-05, 4.66495238e-03,
                                     1.48304762e-03, 6.74761905e-03, 1.80952381e-05, 3.30971429e-03,
                                     2.04000000e-04, 1.50095238e-04, 5.54285714e-05, 4.60742857e-03,
                                     2.11428571e-05, 6.03809524e-05, 5.71428571e-07, 4.01904762e-05,
                                     5.23809524e-05, 6.83809524e-05, 1.90666667e-04, 2.36019048e-03,
                                     6.79561905e-03, 2.50704762e-02, 5.65714286e-05, 5.39828571e-03,
                                     1.60571429e-04, 9.78095238e-04, 6.89523810e-05, 4.36685714e-03,
                                     3.34209524e-03, 5.29961905e-03, 4.45714286e-05, 3.33314286e-03,
                                     4.54247619e-03, 4.26723810e-03, 2.25638095e-03, 1.63780000e-01]

    assert ['{0:.7f}'.format(i) for i in dominant_texture_image] == \
           ['{0:.7f}'.format(i) for i in dominant_texture_image_second]
